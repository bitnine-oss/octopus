

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation and Management &mdash; octopus 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="octopus 0.1 documentation" href="index.html"/>
        <link rel="next" title="User tool" href="tool.html"/>
        <link rel="prev" title="Summary" href="summary.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> octopus
          

          
            
            <img src="_static/Octopus-logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="summary.html">Summary</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Installation and Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisite">prerequisite</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#execution-environment">execution environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirement">requirement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#download">download</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-and-installation">build and installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure">directory structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#management">management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-file">configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#start-and-stop">start and stop</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tool.html">User tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQL.html">SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="connector.html">Connector</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">octopus</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Installation and Management</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/install.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation-and-management">
<h1>Installation and Management<a class="headerlink" href="#installation-and-management" title="Permalink to this headline">¶</a></h1>
<p>In this chapter we&#8217;ll explain about the Octopus&#8217;s installation and management.</p>
<div class="section" id="prerequisite">
<h2>prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h2>
<p>It must satisfy the following requirements and an execution environment to execute the Octopus.</p>
<div class="section" id="execution-environment">
<h3>execution environment<a class="headerlink" href="#execution-environment" title="Permalink to this headline">¶</a></h3>
<p>The Octopus is runnable in all kinds of Linux-like OS, we recommend the CentOS. In addition, all of the examples come forward to use a user account called octopus.</p>
</div>
<div class="section" id="requirement">
<h3>requirement<a class="headerlink" href="#requirement" title="Permalink to this headline">¶</a></h3>
<p>The Octopus is running on JVM environment, needs Hadoop and database for metadata store. These are shown below.</p>
<ul>
<li><p class="first">JVM</p>
<ul>
<li><p class="first">Java 1.7 or higher</p>
</li>
<li><dl class="first docutils">
<dt>Setting JVM installation directory to <code class="docutils literal"><span class="pre">JAVA_HOME</span></code> parameter.</dt>
<dd><ul class="first last simple">
<li>Below is an example <code class="docutils literal"><span class="pre">JAVA_HOME</span></code> parameter settings.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/java
</pre></div>
</div>
<ul>
<li><p class="first">Hadoop</p>
<ul>
<li><p class="first">Hadoop 2.6.0 or higher (dependent on execute time).</p>
</li>
<li><dl class="first docutils">
<dt>Setting Hadoop&#8217;s installation directory to HADOOP_PREFIX parameter</dt>
<dd><ul class="first last simple">
<li>Below is an example HADOOP_PREFIX parameter.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">HADOOP_PREFIX</span><span class="o">=</span>/home/octopus/hadoop
</pre></div>
</div>
<ul>
<li><p class="first">Database for meta store</p>
<ul>
<li><p class="first">The Octopus can use the RDBMS that is supported by DataNucleus to meta store.</p>
</li>
<li><dl class="first docutils">
<dt>Adding a JDBC driver which will be used for meta store to Octopus&#8217;s CLASSPATH.</dt>
<dd><ul class="first last simple">
<li>(Adding a JDBC driver to 2.2.3&#8217;s share/octopus/ext directory)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
</ul>
<p>If you use the source code not the binary distribution it requires additional requirements below to install the Octopus.
- Maven</p>
<blockquote>
<div><ul class="simple">
<li>Maven 3.0 or higher</li>
<li>internet connection</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="installation">
<h2>installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Until now, the Octopus doesn&#8217;t provide a separate binary distribution.</p>
<div class="section" id="download">
<h3>download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h3>
<p>You can get the source code of the Octopus from the git repository below.</p>
<p><a class="reference external" href="https://github.com/bitnine-oss/octopus.git">https://github.com/bitnine-oss/octopus.git</a></p>
<p>This guidance assumes you&#8217;ve got the source code of the Octopus with the following command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span>
<span class="nv">$ </span>git clone https://github.com/bitnine-oss/octopus.git
</pre></div>
</div>
</div>
<div class="section" id="build-and-installation">
<h3>build and installation<a class="headerlink" href="#build-and-installation" title="Permalink to this headline">¶</a></h3>
<p>You can get the Octopus&#8217;s binary by running the following command in the directory that store downloaded source code of the Octopus.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>octopus
<span class="nv">$ </span>mvn package
</pre></div>
</div>
<p>The binary is the file named octopus-x.y.z-SNAPSHOT.tar.gz which is located in octopus-asswmbly/target under source code&#8217;s directory. The x.y.z presents version information, and the version of the time of this writing is 0.1.0.
When you release the above binary files to desired location, the installation is complete.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span>
<span class="nv">$ </span>tar -xzf octopus/octopus-assembly/target/octopus-0.1.0-SNAPSHOT.tar.gz
</pre></div>
</div>
</div>
<div class="section" id="directory-structure">
<h3>directory structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h3>
<p>Directory structure after installation likes below.</p>
<table border="1" class="docutils" id="making-a-table">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">directory name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>bin</td>
<td>Octopus and CLI(octaline) script for execution</td>
</tr>
<tr class="row-odd"><td>etc/octopus</td>
<td>Octopus configuration file</td>
</tr>
<tr class="row-even"><td>libexec</td>
<td>default configuration script</td>
</tr>
<tr class="row-odd"><td>logs</td>
<td>execution log</td>
</tr>
<tr class="row-even"><td>sbin</td>
<td>script for daemon start/stop</td>
</tr>
<tr class="row-odd"><td>share/octopus</td>
<td>Octopus-related JAR files</td>
</tr>
<tr class="row-even"><td>share/octopus/lib</td>
<td>JAR files that relies Octopus when you run</td>
</tr>
<tr class="row-odd"><td>share/octopus/ext</td>
<td>external JAR files to be used in Octopus (ex : JDBC Driver)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="management">
<h2>management<a class="headerlink" href="#management" title="Permalink to this headline">¶</a></h2>
<p>In this chapter, we&#8217;ll explain the configuration for Octopus management and about Octopus&#8217;s start/stop.</p>
<div class="section" id="configuration-file">
<h3>configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h3>
<p>The Octopus&#8217;s configuration files are octopus-env.sh.template file which is located in configuration file directory and octopus-env.sh file which is copied from octopus-default.xml.template file and octopus-site.xml file.
At first, the octopus-env.sh file sets the environment variables and JVM value when the Octopus is started.</p>
<table border="1" class="docutils" id="making-b-table">
<colgroup>
<col width="17%" />
<col width="52%" />
<col width="21%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">variable name</th>
<th class="head">description</th>
<th class="head">default value</th>
<th class="head">note</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>JAVA_HOME</td>
<td>JVM path</td>
<td>n/a</td>
<td>essential</td>
</tr>
<tr class="row-odd"><td>HADOOP_PREFIX</td>
<td>Hadoop path</td>
<td>n/a</td>
<td>essential</td>
</tr>
<tr class="row-even"><td>OCTOPUS_HEAPSIZE</td>
<td>JVM heap size (MB)</td>
<td>1000</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>OCTOPUS_IDENT_STR</td>
<td>String of Octopus instance</td>
<td>$USER environment variable</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>OCTOPUS_PID_DIR</td>
<td>directory for pid file</td>
<td>/tmp</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>OCTOPUS_LOG_DIR</td>
<td>directory for log file</td>
<td>$OCTOPUS_PREFIX/logs</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>OCTOPUS_LOG_FILE</td>
<td>name of log file</td>
<td>octopus.log</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>OCTOPUS_LOG_LEVEL</td>
<td>logging level</td>
<td>INFO</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>OCTOPUS_STOP_TIMEOUT</td>
<td>delay time for kill command when the Octopus instance is stopped</td>
<td>5</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Note that if you pre-set the JAVA_HOME and HADOOP_PREFIX environment variables, you don&#8217;t need to set essentially. Below is an example of creating octopus-env.sh file.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/java
<span class="nv">HADOOP_PREFIX</span><span class="o">=</span>/home/octopus/hadoop
<span class="nv">OCTOPUS_HEAPSIZE</span><span class="o">=</span>4096
<span class="nv">OCTOPUS_LOG_LEVEL</span><span class="o">=</span>DEBUG
</pre></div>
</div>
<p>Next the Octopus-site.xml file sets the Octopus instance.</p>
<table border="1" class="docutils" id="making-c-table">
<colgroup>
<col width="25%" />
<col width="39%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">variable name</th>
<th class="head">description</th>
<th class="head">default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>master.server.address</td>
<td>Octopus instance address</td>
<td>0.0.0.0:58000</td>
</tr>
<tr class="row-odd"><td>master.session.max</td>
<td>maximum number of session that can connect to the Octopus</td>
<td>7</td>
</tr>
<tr class="row-even"><td>metastore.class</td>
<td>class implements the meta store of the Octopus</td>
<td>Kr.co.bitnine.octopus.meta.jdo.JDOMetaStore</td>
</tr>
<tr class="row-odd"><td>metastore.jdo.connection.drivername</td>
<td>JDBC Driver for the database to be used in the Octopus meta store</td>
<td>n/a</td>
</tr>
<tr class="row-even"><td>metastore.jdo.connection.URL</td>
<td>URL for the database to be used in the Octopus meta store</td>
<td>n/a</td>
</tr>
<tr class="row-odd"><td>metastore.jdo.connection.username</td>
<td>account for the database to be used in the Octopus meta store</td>
<td>n/a</td>
</tr>
<tr class="row-even"><td>metastore.jdo.connection.password</td>
<td>account&#8217;s password for the database to be used in the Octopus meta store</td>
<td>n/a</td>
</tr>
</tbody>
</table>
<p>Belows is an example for writing an Octopus-site.xml file.</p>
<div class="highlight-bash"><div class="highlight"><pre>configuration&gt;
  &lt;property&gt;
    &lt;name&gt;master.server.address&lt;/name&gt;
    &lt;value&gt;0.0.0.0:61958&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;master.session.max&lt;/name&gt;
    &lt;value&gt;256&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.class&lt;/name&gt;
    &lt;value&gt;kr.co.bitnine.octopus.meta.jdo.JDOMetaStore&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.jdo.connection.drivername&lt;/name&gt;
    &lt;value&gt;org.mariadb.jdbc.Driver&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.jdo.connection.URL&lt;/name&gt;
    &lt;value&gt; jdbc:mariadb://localhost/octopus&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.jdo.connection.username&lt;/name&gt;
    &lt;value&gt;octopus&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.jdo.connection.password&lt;/name&gt;
    &lt;value&gt;bitnine&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</pre></div>
</div>
</div>
<div class="section" id="start-and-stop">
<h3>start and stop<a class="headerlink" href="#start-and-stop" title="Permalink to this headline">¶</a></h3>
<p>If you have done correctly the setup process above, the starting and stopping of the Octopus can be easily handled by using start-octopus.sh and stop-octopus.sh script under sbin directory.</p>
<p>To verify that the Octopus instance is running properly, just confirm whether there is the OctopusMaster process by using jps command. Below is an example to make sure the Octopus instance is running properly.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>jps
<span class="m">16468</span> Jps
<span class="m">16425</span> OctopusMaster
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tool.html" class="btn btn-neutral float-right" title="User tool" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="summary.html" class="btn btn-neutral" title="Summary" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, bitnine.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>