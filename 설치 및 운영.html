

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>설치 및 운영 &mdash; octopus 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="octopus 0.1 documentation" href="index.html"/>
        <link rel="next" title="사용자 도구" href="사용자 도구.html"/>
        <link rel="prev" title="개요" href="개요.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> octopus
          

          
            
            <img src="_static/Octopus-logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="개요.html">개요</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">설치 및 운영</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">준비</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">실행 환경</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">요구사항</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id5">설치</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">다운로드</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">빌드 및 설치</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">디렉터리 구조</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id9">운영</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">설정 파일</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">실행 및 중지</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="사용자 도구.html">사용자 도구</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQL.html">SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="Connector.html">Connector</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">octopus</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>설치 및 운영</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/설치 및 운영.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>설치 및 운영<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>이 장에서는 Octopus의 설치 및 운영에 대해 기술한다.</p>
<div class="section" id="id2">
<h2>준비<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Octopus를 실행하기 위해서 아래의 실행 환경과 요구 사항을 만족해야 한다.</p>
<div class="section" id="id3">
<h3>실행 환경<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Octopus는 Linux 계열의 OS에서 실행 가능하며, CentOS를 추천한다. 또한 앞으로 나올 모든 예제에서는 octopus라는 사용자 계정을 사용한다.</p>
</div>
<div class="section" id="id4">
<h3>요구사항<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Octopus는 JVM 환경 위에서 실행되며, Hadoop과 메타스토어용 데이터베이스를 필요로 한다. 아래에 각 요구사항에 대한 세부 설명이 있다.</p>
<ul>
<li><p class="first">JVM</p>
<ul>
<li><p class="first">Java 1.7 이상</p>
</li>
<li><dl class="first docutils">
<dt>JVM 설치 경로를 <code class="docutils literal"><span class="pre">JAVA_HOME</span></code> 환경변수에 설정</dt>
<dd><ul class="first last simple">
<li>아래는 <code class="docutils literal"><span class="pre">JAVA_HOME</span></code> 환경변수 설정 예시이다.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/java
</pre></div>
</div>
<ul>
<li><p class="first">Hadoop</p>
<ul>
<li><p class="first">Hadoop 2.6.0 이상 (실행 시간 의존)</p>
</li>
<li><dl class="first docutils">
<dt>Hadoop의 설치 경로를 HADOOP_PREFIX 환경변수에 설정</dt>
<dd><ul class="first last simple">
<li>아래는 HADOOP_PREFIX 환경변수 설정 예시이다.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">HADOOP_PREFIX</span><span class="o">=</span>/home/octopus/hadoop
</pre></div>
</div>
<ul>
<li><p class="first">메타스토어용 데이터베이스</p>
<ul>
<li><p class="first">Octopus는 DataNucleus가 지원하는 RDBMS를 메타스토어로 사용할 수 있음</p>
</li>
<li><dl class="first docutils">
<dt>메타스토어로 사용할 데이터베이스의 JDBC 드라이버를 Octopus의 CLASSPATH에 추가</dt>
<dd><ul class="first last simple">
<li>(2.2.3의 share/octopus/ext에 JDBC 드라이버를 추가)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
</ul>
<p>만약 바이너리 배포가 아닌 소스코드를 사용하여 Octopus를 설치할 경우 아래의 요구사항이 추가로 필요하다.</p>
<ul class="simple">
<li>Maven<ul>
<li>Maven 3.0 이상</li>
<li>인터넷 연결</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="id5">
<h2>설치<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>현재 Octopus는 별도의 바이너리 배포를 제공하고 있지 않다. 대신 소스코드를 직접 빌드해서 나온 바이너리 배포를 압축 해제하여 설치한다.</p>
<div class="section" id="id6">
<h3>다운로드<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Octopus의 소스코드는 아래의 git 저장소에서 얻을 수 있다.</p>
<p><a class="reference external" href="https://github.com/bitnine-oss/octopus.git">https://github.com/bitnine-oss/octopus.git</a></p>
<p>이 문서에서는 아래의 명령을 통해 Octopus 소스코드를 얻었다고 가정한다.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span>
<span class="nv">$ </span>git clone https://github.com/bitnine-oss/octopus.git
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h3>빌드 및 설치<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>다운로드 한 Octopus 소스코드가 있는 디렉터리에서 아래의 명령을 수행하면 Octopus의 바이너리를 얻을 수 있다.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>octopus
<span class="nv">$ </span>mvn package
</pre></div>
</div>
<p>빌드 결과 바이너리는 소스코드 디렉터리 내의 octopus-assembly/target 경로에 있는 octopus-x.y.z-SNAPSHOT.tar.gz 이름의 파일이다. 여기서 x.y.z는 버전 정보이며, 이 문서가 작성되는 시점의 버전은 0.1.0이다.</p>
<p>위의 바이너리 파일을 원하는 위치에 압축 해제하면 설치가 완료된다. 이 문서에서는 octopus 계정의 홈 디렉터리에 압축 해제했다고 가정한다.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span>
<span class="nv">$ </span>tar -xzf octopus/octopus-assembly/target/octopus-0.1.0-SNAPSHOT.tar.gz
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3>디렉터리 구조<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>설치한 Octopus의 디렉터리 구조는 아래와 같다.</p>
<table border="1" class="docutils" id="making-a-table">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">디렉터리 명</th>
<th class="head">설명</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>bin</td>
<td>Octopus 및 CLI(octaline) 실행 스크립트</td>
</tr>
<tr class="row-odd"><td>etc/octopus</td>
<td>Octopus 설정 파일</td>
</tr>
<tr class="row-even"><td>libexec</td>
<td>기본 환경 설정 스크립트</td>
</tr>
<tr class="row-odd"><td>logs</td>
<td>실행 로그</td>
</tr>
<tr class="row-even"><td>sbin</td>
<td>데몬 실행/중지 스크립트</td>
</tr>
<tr class="row-odd"><td>share/octopus</td>
<td>Octopus 관련 JAR 파일</td>
</tr>
<tr class="row-even"><td>share/octopus/lib</td>
<td>Octopus 실행시 의존하는 JAR 파일</td>
</tr>
<tr class="row-odd"><td>share/octopus/ext</td>
<td>Octopus에서 사용할 외부 JAR 파일 (예: JDBC 드라이버)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="id9">
<h2>운영<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>이 장에서는 Octopus 운영에 필요한 설정 및 Octopus의 실행/중지에 대해 기술한다.</p>
<div class="section" id="id10">
<h3>설정 파일<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>Octopus의 설정 파일은 설정 파일 디렉터리에 있는 octopus-env.sh.template 파일과 octopus-default.xml.template 파일을 복사한 octopus-env.sh 파일과 octopus-site.xml 파일이 있다.</p>
<p>먼저 octopus-env.sh 파일은 Octopus 실행시 환경 변수와 JVM 값을 설정한다.</p>
<table border="1" class="docutils" id="making-b-table">
<colgroup>
<col width="18%" />
<col width="50%" />
<col width="22%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">변수명</th>
<th class="head">설명</th>
<th class="head">기본값</th>
<th class="head">비고</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>JAVA_HOME</td>
<td>JVM 경로</td>
<td>없음</td>
<td>필수</td>
</tr>
<tr class="row-odd"><td>HADOOP_PREFIX</td>
<td>Hadoop 경로</td>
<td>없음</td>
<td>필수</td>
</tr>
<tr class="row-even"><td>OCTOPUS_HEAPSIZE</td>
<td>JVM heap 크기 (MB)</td>
<td>1000</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>OCTOPUS_IDENT_STR</td>
<td>Octotpus 인스턴스의 문자열</td>
<td>$USER 환경 변수</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>OCTOPUS_PID_DIR</td>
<td>pid 파일 저장 디렉터리</td>
<td>/tmp</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>OCTOPUS_LOG_DIR</td>
<td>log 파일 저장 디렉터리</td>
<td>$OCTOPUS_PREFIX/logs</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>OCTOPUS_LOG_FILE</td>
<td>log 파일 이름</td>
<td>octopus.log</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>OCTOPUS_LOG_LEVEL</td>
<td>로깅 레벨</td>
<td>INFO</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>OCTOPUS_STOP_TIMEOUT</td>
<td>Octopus 인스턴스 정지시 kill 명령 수행 유예 시간 (초)</td>
<td>5</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>참고로 JAVA_HOME과 HADOOP_PREFIX를 환경 변수로 미리 설정했다면, 필수로 설정하지 않아도 된다. 아래는 octopus-env.sh 파일의 작성 예시이다.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/java
<span class="nv">HADOOP_PREFIX</span><span class="o">=</span>/home/octopus/hadoop
<span class="nv">OCTOPUS_HEAPSIZE</span><span class="o">=</span>4096
<span class="nv">OCTOPUS_LOG_LEVEL</span><span class="o">=</span>DEBUG
</pre></div>
</div>
<p>다음으로 octopus-site.xml 파일은 Octopus 인스턴스를 설정한다.</p>
<table border="1" class="docutils" id="making-c-table">
<colgroup>
<col width="27%" />
<col width="36%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">변수명</th>
<th class="head">설명</th>
<th class="head">기본값</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>master.server.address</td>
<td>Octopus 인스턴스 주소</td>
<td>0.0.0.0:58000</td>
</tr>
<tr class="row-odd"><td>master.session.max</td>
<td>Octopus에 접속 가능한 최대 세션 수</td>
<td>7</td>
</tr>
<tr class="row-even"><td>metastore.class</td>
<td>Octopus 메타스토어를 구현한 클래스</td>
<td>Kr.co.bitnine.octopus.meta.jdo.JDOMetaStore</td>
</tr>
<tr class="row-odd"><td>metastore.jdo.connection.drivername</td>
<td>Octopus 메타스토어에서 사용할 데이터베이스의 JDBC 드라이버</td>
<td>없음</td>
</tr>
<tr class="row-even"><td>metastore.jdo.connection.URL</td>
<td>Octopus 메타스토어에서 사용할 데이터베이스의 URL</td>
<td>없음</td>
</tr>
<tr class="row-odd"><td>metastore.jdo.connection.username</td>
<td>Octopus 메타스토어에서 사용할 데이터베이스의 계정</td>
<td>없음</td>
</tr>
<tr class="row-even"><td>metastore.jdo.connection.password</td>
<td>Octopus 메타스토어에서 사용할 데이터베이스의 계정 암호</td>
<td>없음</td>
</tr>
</tbody>
</table>
<p>아래는 octopus-site.xml 파일의 작성 예시이다.</p>
<div class="highlight-bash"><div class="highlight"><pre>configuration&gt;
  &lt;property&gt;
    &lt;name&gt;master.server.address&lt;/name&gt;
    &lt;value&gt;0.0.0.0:61958&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;master.session.max&lt;/name&gt;
    &lt;value&gt;256&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.class&lt;/name&gt;
    &lt;value&gt;kr.co.bitnine.octopus.meta.jdo.JDOMetaStore&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.jdo.connection.drivername&lt;/name&gt;
    &lt;value&gt;org.mariadb.jdbc.Driver&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.jdo.connection.URL&lt;/name&gt;
    &lt;value&gt; jdbc:mariadb://localhost/octopus&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.jdo.connection.username&lt;/name&gt;
    &lt;value&gt;octopus&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;metastore.jdo.connection.password&lt;/name&gt;
    &lt;value&gt;bitnine&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h3>실행 및 중지<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>위의 설정 과정을 제대로 수행했다면, Octopus의 실행과 중지는 sbin 디렉터리에 있는 start-octopus.sh과 stop-octopus.sh 스크립트를 사용해서 손쉽게 할 수 있다.</p>
<p>Octopus 인스턴스가 제대로 실행되었는지 확인하려면 jps 명령어로 OctopusMaster 프로세스가 있는지 보면 된다. 아래는 Octopus 인스턴스가 제대로 실행되었는지 확인하는 예제이다.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>jps
<span class="m">16468</span> Jps
<span class="m">16425</span> OctopusMaster
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="사용자 도구.html" class="btn btn-neutral float-right" title="사용자 도구" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="개요.html" class="btn btn-neutral" title="개요" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, bitnine.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>