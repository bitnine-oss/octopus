

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SQL &mdash; octopus 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="octopus 0.1 documentation" href="index.html"/>
        <link rel="next" title="Connector" href="connector.html"/>
        <link rel="prev" title="User tool" href="tool.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> octopus
          

          
            
            <img src="_static/Octopus-logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="summary.html">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation and Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="tool.html">User tool</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">SQL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#data-type">Data Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-definition-language">Data Definition Language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#alter-system-add-datasource">ALTER SYSTEM ADD DATASOURCE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alter-system-update-datasource">ALTER SYSTEM UPDATE DATASOURCE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alter-system-drop-datasource">ALTER SYSTEM DROP DATASOURCE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-manipulation-language">Data Manipulation Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="#octopus-administration-statements">Octopus Administration Statements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#user-account">User account</a></li>
<li class="toctree-l3"><a class="reference internal" href="#privileges">privileges</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comment-and-column-category">comment and column category</a></li>
<li class="toctree-l3"><a class="reference internal" href="#show-statement">SHOW statement</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="connector.html">Connector</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">octopus</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>SQL</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/SQL.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sql">
<h1>SQL<a class="headerlink" href="#sql" title="Permalink to this headline">¶</a></h1>
<p>In this chapter, we&#8217;ll explain about the SQL that is supported by the Octopus.</p>
<div class="section" id="data-type">
<h2>Data Type<a class="headerlink" href="#data-type" title="Permalink to this headline">¶</a></h2>
<p>Data types supported by the current Octopus is as follows.</p>
<table border="1" class="docutils" id="making-a-table">
<colgroup>
<col width="9%" />
<col width="11%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">SQL type</th>
<th class="head">size(bytes)</th>
<th class="head">range</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>INTEGER</td>
<td>4</td>
<td>-231 (-2,147,483,648) ~ 231 - 1 (2,147,483,647)</td>
</tr>
<tr class="row-odd"><td>BIGINT</td>
<td>8</td>
<td>-263 (-9,223,372,036,854,775,808) ~ 263 - 1 (9,223,372,036,854,775,807)</td>
</tr>
<tr class="row-even"><td>FLOAT</td>
<td>4</td>
<td>-3.4E+38 ~ 3.4E+38</td>
</tr>
<tr class="row-odd"><td>REAL</td>
<td>4</td>
<td>-3.4E+38 ~ 3.4E+38</td>
</tr>
<tr class="row-even"><td>DOUBLE</td>
<td>8</td>
<td>-1.7E–308 ~ 1.7E+308</td>
</tr>
<tr class="row-odd"><td>NUMERIC</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>VARCHAR</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>DATE</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>YYYY-mm-dd</td>
</tr>
<tr class="row-even"><td>TIMESTAMP</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>YYYY-mm-dd HH:MM:SS[.NNNNNNNNN]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-definition-language">
<h2>Data Definition Language<a class="headerlink" href="#data-definition-language" title="Permalink to this headline">¶</a></h2>
<div class="section" id="alter-system-add-datasource">
<h3>ALTER SYSTEM ADD DATASOURCE<a class="headerlink" href="#alter-system-add-datasource" title="Permalink to this headline">¶</a></h3>
<p>Add the data sources to be managed by the Octopus. You can add only data source that supports JDBC connection.</p>
<div class="highlight-bash"><div class="highlight"><pre>ALTER SYSTEM ADD DATASOURCE <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span>
  CONNECT TO <span class="s1">&#39;&lt;jdbcConnectionString&gt;&#39;</span>
  USING <span class="s1">&#39;&lt;jdbcDriverName&gt;&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>dataSourceName</strong></p>
<p>Specify the name fo the data source you want to add.</p>
<p><strong>jdbcConnectionString</strong></p>
<p>JDBC connection Address for the data source.</p>
<p><strong>jdbcDriverName</strong></p>
<p>JDBC driver name for the data source connection.</p>
<ul class="simple">
<li>example</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>ALTER SYSTEM ADD DATASOURCE <span class="s2">&quot;spark&quot;</span>
  CONNECT TO <span class="s1">&#39;jdbc:hive2://localhost:10001&#39;</span>
  USING <span class="s1">&#39;org.apache.hive.JDBC&#39;</span> <span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="alter-system-update-datasource">
<h3>ALTER SYSTEM UPDATE DATASOURCE<a class="headerlink" href="#alter-system-update-datasource" title="Permalink to this headline">¶</a></h3>
<p>If the schema information for the data source is changed that have being managed by the Octopus, apply it to the meta store of the Octopus.
This statement provides a variety of grammar to be updated only full data source, only specific schemes or only specific tables.</p>
<div class="highlight-bash"><div class="highlight"><pre>ALTER SYSTEM UPDATE DATASOURCE <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> <span class="p">;</span>
ALTER SYSTEM UPDATE SCHEMA <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> . <span class="s1">&#39;schemaPattern&#39;</span> <span class="p">;</span>
ALTER SYSTEM UPDATE TABLE <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> . <span class="s1">&#39;schemaPattern&#39;</span> . <span class="s1">&#39;tablePattern&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>dataSourceName</strong></p>
<p>Specify the name fo the data source you want to update.</p>
<p><strong>schemaPattern, tablePattern</strong></p>
<p>Specify the schema and table pattern to be updated. The pattern is the same as in SQL&#8217;s LIKE pattern.</p>
<ul class="simple">
<li>example</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>ALTER SYSTEM UPDATE DATASOURCE <span class="s2">&quot;spark&quot;</span><span class="p">;</span>
ALTER SYSTEM UPDATE SCHEMA <span class="s2">&quot;spark&quot;</span>.<span class="s1">&#39;div%&#39;</span><span class="p">;</span>
ALTER SYSTEM UPDATE TABLE <span class="s2">&quot;spark&quot;</span>.<span class="s1">&#39;%&#39;</span>.<span class="s1">&#39;%stat%&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="alter-system-drop-datasource">
<h3>ALTER SYSTEM DROP DATASOURCE<a class="headerlink" href="#alter-system-drop-datasource" title="Permalink to this headline">¶</a></h3>
<p>Delete the data source from the meta-Store of the Octopus. You can&#8217;t get schema information and query processing any more to deleted data source.</p>
<div class="highlight-bash"><div class="highlight"><pre>ALTER SYSTEM DROP DATASOURCE <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>dataSourceName</strong></p>
<p>Specify the name of the data source that you want to delete.</p>
<ul class="simple">
<li>example</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>ALTER SYSTEM DROP DATASOURCE <span class="s2">&quot;spark&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="data-manipulation-language">
<h2>Data Manipulation Language<a class="headerlink" href="#data-manipulation-language" title="Permalink to this headline">¶</a></h2>
<p>The Octopus is supported only for SELECT queries across multiple data sources and INSERT, UPDATE, DELETE is not supported. The Octopus supports the SELECT statement as follows. However, in the case of by-pass query, the Octopus can not process the grammar that is not supported by such data sources because of the nature of the Octopus.</p>
<div class="highlight-bash"><div class="highlight"><pre>query:
  <span class="o">[</span> WITH withItem <span class="o">{</span> , withItem <span class="o">}</span>* query <span class="o">]</span>
<span class="p">|</span> <span class="o">{</span> <span class="k">select</span>
  <span class="p">|</span> query UNION <span class="o">[</span> ALL <span class="o">]</span> query
  <span class="p">|</span> query EXCEPT query
  <span class="p">|</span> query INTERSECT query
  <span class="o">}</span>
  <span class="o">[</span> ORDER BY orderItem <span class="o">{</span> , orderItem <span class="o">}</span>* <span class="o">]</span>
  <span class="o">[</span> LIMIT <span class="o">{</span> &lt;count&gt; <span class="p">|</span> ALL <span class="o">}</span> <span class="o">]</span>
  <span class="o">[</span> OFFSET &lt;start&gt; <span class="o">{</span> ROW <span class="p">|</span> ROWS <span class="o">}</span> <span class="o">]</span>
  <span class="o">[</span> FETCH <span class="o">{</span> FIRST <span class="p">|</span> NEXT <span class="o">}</span> <span class="o">[</span> &lt;count&gt; <span class="o">]</span> <span class="o">{</span> ROW <span class="p">|</span> ROWS <span class="o">}</span> <span class="o">]</span>

withItem: &lt;withName&gt; <span class="o">[</span> <span class="o">(</span> &lt;withColumn&gt; <span class="o">{</span> , &lt;withColumn&gt; <span class="o">}</span>* <span class="o">)</span> <span class="o">]</span> AS <span class="o">(</span> query <span class="o">)</span>

orderItem: &lt;expression&gt; <span class="o">[</span> ASC <span class="p">|</span> DESC <span class="o">]</span> <span class="o">[</span> NULLS FIRST <span class="p">|</span> NULLS LAST <span class="o">]</span>

<span class="k">select</span>:
  SELECT <span class="o">[</span> STREAM <span class="o">]</span> <span class="o">[</span> ALL <span class="p">|</span> DISTINCT <span class="o">]</span>
  <span class="o">{</span> <span class="s1">&#39;*&#39;</span> <span class="p">|</span> projectItem <span class="o">{</span> , projectItem <span class="o">}</span>* <span class="o">}</span>
  FROM tableExpression
  <span class="o">[</span> WHERE &lt;booleanExpression&gt; <span class="o">]</span>
  <span class="o">[</span> GROUP BY groupItem <span class="o">{</span> , groupItem <span class="o">}</span>* <span class="o">]</span>
  <span class="o">[</span> HAVING &lt;booleanExpression&gt; <span class="o">]</span>

projectItem:
  &lt;expression&gt; <span class="o">[</span> <span class="o">[</span> AS <span class="o">]</span> &lt;columnAlias&gt; <span class="o">]</span>
<span class="p">|</span> &lt;tableAlias&gt; . <span class="s1">&#39;*&#39;</span>

tableExpression:
  tableReference <span class="o">{</span> , tableReference <span class="o">}</span>*
<span class="p">|</span> tableExpression <span class="o">[</span> NATURAL <span class="o">]</span> <span class="o">[</span> LEFT <span class="p">|</span> RIGHT <span class="p">|</span> FULL <span class="o">]</span> JOIN
  tableExpression <span class="o">[</span> joinCondition <span class="o">]</span>

joinCondition: ON &lt;booleanExpression&gt; <span class="p">|</span> USING <span class="o">(</span> &lt;column&gt; <span class="o">{</span> , &lt;column&gt; <span class="o">}</span>* <span class="o">)</span>

tableReference:
  <span class="o">[</span> LATERAL <span class="o">]</span> tablePrimary
  <span class="o">[</span> <span class="o">[</span> AS <span class="o">]</span> &lt;tableAlias&gt; <span class="o">[</span> <span class="o">(</span> &lt;columnAlias&gt; <span class="o">{</span> , &lt;columnAlias&gt; <span class="o">}</span>* <span class="o">)</span> <span class="o">]</span> <span class="o">]</span>

tablePrimary:
  <span class="o">[</span> TABLE <span class="o">]</span> <span class="o">[</span> <span class="o">[</span> &lt;dataSourceName&gt; . <span class="o">]</span> &lt;schemaName&gt; . <span class="o">]</span> &lt;tableName&gt;
  <span class="p">|</span> <span class="o">(</span> query <span class="o">)</span>
  <span class="p">|</span> values
  <span class="p">|</span> UNNEST <span class="o">(</span> &lt;expression&gt; <span class="o">)</span>
  <span class="p">|</span> TABLE <span class="o">(</span> <span class="o">[</span> SPECIFIC <span class="o">]</span> functionName <span class="o">(</span> &lt;expression&gt; <span class="o">{</span> , &lt;expression&gt; <span class="o">}</span>* <span class="o">)</span> <span class="o">)</span>

values: VALUES &lt;expression&gt; <span class="o">{</span> , &lt;expression&gt; <span class="o">}</span>*

groupItem:
  &lt;expression&gt;
<span class="p">|</span> <span class="o">(</span> <span class="o">)</span>
<span class="p">|</span> <span class="o">(</span> &lt;expression. <span class="o">{</span> , expression <span class="o">}</span>* <span class="o">)</span>
<span class="p">|</span> CUBE <span class="o">(</span> &lt;expression&gt; <span class="o">{</span> , expression <span class="o">}</span>* <span class="o">)</span>
<span class="p">|</span> ROLLUP <span class="o">(</span> expression <span class="o">{</span> , expression <span class="o">}</span>* <span class="o">)</span>
<span class="p">|</span> GROUPING SETS <span class="o">(</span> groupItem <span class="o">{</span> , groupItem <span class="o">}</span>* <span class="o">)</span>
</pre></div>
</div>
<p><strong>count, start</strong></p>
<p>How many returns you want to get, or specify fetch some first results from (an integer of 0 or more).</p>
<p><strong>withName, withColumn</strong></p>
<p>Specify the WITH clause and result column&#8217;s name (identifier format).</p>
<p><strong>columnAlias, tableAlias</strong></p>
<p>Specify the alias name of columns and tables (identifier format).</p>
<p><strong>dataSourceName, schemaName, tableName</strong></p>
<p>Specify the datasource&#8217;s, scheme&#8217;s, table&#8217;s name (identifier format).</p>
<ul class="simple">
<li>expression</li>
</ul>
<p>Arithmetic expressions, comparison expressions, or logical expressions can come.
The value used in expression can get the specific column value as that column&#8217;s identifier or directly input to the constant.
The Octopus support the arithmetic expression, comparison expression like below, and you can use it in each expression.</p>
<table border="1" class="docutils" id="making-b-table">
<colgroup>
<col width="25%" />
<col width="56%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">arithmetic expression</th>
<th class="head">description</th>
<th class="head">result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>numeric1 + numeric2</td>
<td>add numeric1 and numeric2</td>
<td>numeric</td>
</tr>
<tr class="row-odd"><td>numeric1 - numeric2</td>
<td>Subtract the numeric2 on the numeric1</td>
<td>numeric</td>
</tr>
<tr class="row-even"><td>numeric1 * numeric2</td>
<td>product numeric1 and numeric2</td>
<td>numeric</td>
</tr>
<tr class="row-odd"><td>numeric1 / numeric2</td>
<td>quotient obtained by dividing the numeric1 to numeric2</td>
<td>numeric</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils" id="making-c-table">
<colgroup>
<col width="24%" />
<col width="48%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">comparison expression</th>
<th class="head">description</th>
<th class="head">result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>value1 = value2</td>
<td>equal</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>value1 &lt;&gt; value2</td>
<td>not equal</td>
<td>boolean</td>
</tr>
<tr class="row-even"><td>value1 &gt; value2</td>
<td>bigger</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>value1 &gt;= value2</td>
<td>bigger or equal</td>
<td>boolean</td>
</tr>
<tr class="row-even"><td>value1 &lt; value2</td>
<td>smaller</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>value1 &lt;= value2</td>
<td>smaller or equal</td>
<td>boolean</td>
</tr>
<tr class="row-even"><td>value IS NULL</td>
<td>value is NULL</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>value IS NOT NULL</td>
<td>value is not NULL</td>
<td>boolean</td>
</tr>
<tr class="row-even"><td>string1 LIKE string2</td>
<td>string1&#8217;s pattern and string2&#8217;s pattern are matched</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>string1 NOT LIKE string2</td>
<td>string1&#8217;s pattern and string2&#8217;s pattern are not matched</td>
<td>boolean</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>booleanExpression (logical expression)</li>
</ul>
<p>It is an expression consisting of AND, OR combination of logic operators. In the Octopus supports below logical operators.</p>
<table border="1" class="docutils" id="making-d-table">
<colgroup>
<col width="21%" />
<col width="57%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">operator</th>
<th class="head">description</th>
<th class="head">result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>boolean1 OR boolean2</td>
<td>boolean1 or boolean2 is(are) true</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>boolean1 AND boolean2</td>
<td>boolean2 and boolean2 are true</td>
<td>boolean</td>
</tr>
<tr class="row-even"><td>NOT boolean</td>
<td>boolean is not true; if the boolean is UNKNOWN, it would be UNKNOWN</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>boolean IS FALSE</td>
<td>boolean is false; if the boolean is UNKNOWN, it would be false</td>
<td>boolean</td>
</tr>
<tr class="row-even"><td>boolean IS NOT FALSE</td>
<td>boolean is not false; if the boolean is UNKNOWN, it would be true</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>boolean IS TRUE</td>
<td>boolean is true; if the boolean is UNKNOWN, it would be false</td>
<td>boolean</td>
</tr>
<tr class="row-even"><td>boolean IS NOT TRUE</td>
<td>boolean is not true; if the boolean is UNKNOWN, it would be true</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>boolean IS UNKNOWN</td>
<td>boolean is UNKNOWN</td>
<td>boolean</td>
</tr>
<tr class="row-even"><td>boolean IS NOT UNKNOWN</td>
<td>boolean is not UNKNOWN</td>
<td>boolean</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="octopus-administration-statements">
<h2>Octopus Administration Statements<a class="headerlink" href="#octopus-administration-statements" title="Permalink to this headline">¶</a></h2>
<p>The Octopus has a user account concept.
Also ensure that the user account has access to the specified scheme, and provides access control that allows to grant access.
And it can also add some comments to the specific scheme information.
Finally, it provides the ability to retrieve the various information.
This chapther we explain the statement that is used in management of the Octopus.</p>
<div class="section" id="user-account">
<h3>User account<a class="headerlink" href="#user-account" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Creating and modifying user accounts.</li>
</ul>
<p>The following two sentences each create and modify the Octopus user account. The account have been created just now does not have any privileges.</p>
<div class="highlight-bash"><div class="highlight"><pre>CREATE USER <span class="s2">&quot;&lt;user&gt;&quot;</span> IDENTIFIED BY <span class="s1">&#39;&lt;password&gt;&#39;</span> <span class="p">;</span>

ALTER USER <span class="s2">&quot;&lt;user&gt;&quot;</span> IDENTIFIED BY <span class="s1">&#39;&lt;password&gt;&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>user</strong></p>
<p>Specify the account&#8217;s name to create/modify.</p>
<p><strong>password</strong></p>
<p>Create password of the new account or modify password of the exist account</p>
<blockquote>
<div><ul class="simple">
<li>example</li>
</ul>
</div></blockquote>
<div class="highlight-bash"><div class="highlight"><pre>CREATE USER <span class="s2">&quot;octopus&quot;</span> IDENTIFIED BY <span class="s1">&#39;bitnine&#39;</span><span class="p">;</span>

ALTER USER <span class="s2">&quot;octopus&quot;</span> IDENTIFIED BY <span class="s1">&#39;squid&#39;</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>drop the user account.</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>DROP USER <span class="s2">&quot;&lt;user&gt;&quot;</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>user</strong></p>
<p>Specify the account to be deleted.</p>
<blockquote>
<div><ul class="simple">
<li>example</li>
</ul>
</div></blockquote>
<div class="highlight-bash"><div class="highlight"><pre>DROP USER <span class="s2">&quot;octopus&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="privileges">
<h3>privileges<a class="headerlink" href="#privileges" title="Permalink to this headline">¶</a></h3>
<p>First, find out about the sentences that grant or revoke the system privileges.</p>
<div class="highlight-bash"><div class="highlight"><pre>GRANT systemPrivileges TO grantees <span class="p">;</span>

REVOKE systemPrivileges FROM grantees <span class="p">;</span>

systemPrivileges: systemPrivilege <span class="o">{</span> , systemPrivilege <span class="o">}</span>*
grantees: grantee <span class="o">{</span> , grantee <span class="o">}</span>*
grantee: <span class="s1">&#39;&lt;user&gt;&#39;</span>
</pre></div>
</div>
<p><strong>user</strong></p>
<p>The account to be granted privileges.</p>
<p><strong>systemPrivilege</strong></p>
<p>The Octopus support the privileges as below.</p>
<table border="1" class="docutils" id="making-e-table">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">privilege</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ALTER SYSTEM</td>
<td>privilege for executing ALTER SYSTEM statement</td>
</tr>
<tr class="row-odd"><td>SELECT ANY TABLE</td>
<td>privilege for executing SELECT statement to any table</td>
</tr>
<tr class="row-even"><td>CREATE USER</td>
<td>privilege for creating user account</td>
</tr>
<tr class="row-odd"><td>ALTER USER</td>
<td>privilege for modifying user account</td>
</tr>
<tr class="row-even"><td>DROP USER</td>
<td>privilege for deleting user account</td>
</tr>
<tr class="row-odd"><td>COMMENT ANY</td>
<td>privilege for adding comment and column category to any target</td>
</tr>
<tr class="row-even"><td>GRANT ANY OBJECT PRIVILEGE</td>
<td>privilege for granting privilege for object</td>
</tr>
<tr class="row-odd"><td>GRANT ANY PRIVILEGE</td>
<td>privilege for granting privilege for system</td>
</tr>
<tr class="row-even"><td>ALL PRIVILEGES</td>
<td>all of the above system privileges</td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li>example</li>
</ul>
</div></blockquote>
<div class="highlight-bash"><div class="highlight"><pre>GRANT ALTER SYSTEM, CREATE USER, DROP USER TO <span class="s2">&quot;octopus&quot;</span>, <span class="s2">&quot;admin&quot;</span><span class="p">;</span>

REVOKE ALTER SYSTEM FROM <span class="s2">&quot;octopus&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Next, find out about the sentences to grant or revoke the object privilege.</p>
<div class="highlight-bash"><div class="highlight"><pre>GRANT objectPrivileges ON object TO grantees <span class="p">;</span>

REVOKE objectPrivileges ON object FROM grantees <span class="p">;</span>

objectPrivileges: objectPrivilege <span class="o">{</span> , objectPrivilege <span class="o">}</span>*
object: <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> . <span class="s2">&quot;&lt;schemaName&gt;&quot;</span>
</pre></div>
</div>
<p><strong>dataSourceName, schemaName</strong></p>
<p>The limited privileges for the specified scheme.</p>
<p><strong>objectPrivilege</strong></p>
<p>The Octopus provides object privileges as below.</p>
<table border="1" class="docutils" id="making-f-table">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">privilege</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SELECT</td>
<td>privilege for executing SELECT statement to table that is in specified scheme</td>
</tr>
<tr class="row-odd"><td>COMMENT</td>
<td>privilege for adding comments and column category to table and column that is in specified scheme</td>
</tr>
<tr class="row-even"><td>ALL [ PRIVILEGES ]</td>
<td>all of the above system privileges</td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li>example</li>
</ul>
</div></blockquote>
<div class="highlight-bash"><div class="highlight"><pre>GRANT ALL ON <span class="s2">&quot;spark&quot;</span>.<span class="s2">&quot;default&quot;</span> TO <span class="s2">&quot;anon&quot;</span><span class="p">;</span>

REVOKE COMMENT ON <span class="s2">&quot;spark&quot;</span>.<span class="s2">&quot;default&quot;</span> FROM <span class="s2">&quot;anon&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="comment-and-column-category">
<h3>comment and column category<a class="headerlink" href="#comment-and-column-category" title="Permalink to this headline">¶</a></h3>
<p>The Octopus provides the function that can add comments on many data sources, schemas, tables, columns, user accounts for the conviniece of managing them. And also provides adding comments for column category that represent what is the contents of the column. And you can retrieve by using comments and column category that was added by user. First, we&#8217;ll discuss the statements for adding comment or column category, and we&#8217;ll discuss again the SHOW statements for retrieving in 4.4.4.</p>
<ul class="simple">
<li>add comment</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>COMMENT ON target IS <span class="s1">&#39;&lt;comment&gt;&#39;</span> <span class="p">;</span>
Target: DATASOURCE <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span>
       <span class="p">|</span> SCHEMA <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> . <span class="s2">&quot;&lt;schemaName&gt;&quot;</span>
       <span class="p">|</span> TABLE <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> . <span class="s2">&quot;&lt;schemaName&gt;&quot;</span> . <span class="s2">&quot;&lt;tableName&gt;&quot;</span>
       <span class="p">|</span> COLUMN <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> . <span class="s2">&quot;&lt;schemaName&gt;&quot;</span> . <span class="s2">&quot;&lt;tableName&gt;&quot;</span> .
                  <span class="s2">&quot;&lt;columnName&gt;&quot;</span>
       <span class="p">|</span> USER <span class="s2">&quot;&lt;user&gt;&quot;</span>
</pre></div>
</div>
<p><strong>dataSourceName, schemaName, tableName, columnName, user</strong></p>
<p>Specify the data source, scheme, table, column and user account to be comment added.</p>
<p><strong>comment</strong></p>
<p>Comment string to add to the target.</p>
<blockquote>
<div><ul class="simple">
<li>example</li>
</ul>
</div></blockquote>
<div class="highlight-bash"><div class="highlight"><pre>COMMENT ON USER <span class="s2">&quot;octopus&quot;</span> IS <span class="s1">&#39;super user&#39;</span><span class="p">;</span>
COMMENT ON TABLE <span class="s2">&quot;spark&quot;</span>.<span class="s2">&quot;default&quot;</span>.<span class="s2">&quot;stat&quot;</span> IS <span class="s1">&#39;basic statistics&#39;</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>add the column category</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>SET DATACATEGORY
  ON COLUMN <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> . <span class="s2">&quot;&lt;schemaName&gt;&quot;</span> . <span class="s2">&quot;&lt;tableName&gt;&quot;</span> .
              <span class="s2">&quot;&lt;columnName&gt;&quot;</span>
  IS <span class="s1">&#39;&lt;category&gt;&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>dataSourceName, schemaName, tableName, columnName</strong></p>
<p>Specify the column to add a column category.</p>
<p><strong>category</strong></p>
<p>Column category string.</p>
<blockquote>
<div><ul class="simple">
<li>example</li>
</ul>
</div></blockquote>
<div class="highlight-bash"><div class="highlight"><pre>SET DATACATEGORY ON COLUMN <span class="s2">&quot;spark&quot;</span>.<span class="s2">&quot;account&quot;</span>.<span class="s2">&quot;vip&quot;</span>.<span class="s2">&quot;ssn&quot;</span> IS <span class="s1">&#39;private&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="show-statement">
<h3>SHOW statement<a class="headerlink" href="#show-statement" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we&#8217;ll discuss about the function for retrieving user account information, scheme information, privilege information, comment and column category.</p>
<ul class="simple">
<li>Retrieve the user account.</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>SHOW ALL USERS <span class="p">;</span>
</pre></div>
</div>
<p>Result column is like below.</p>
<table border="1" class="docutils" id="making-g-table">
<colgroup>
<col width="21%" />
<col width="23%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>USER_NAME</td>
<td>VARCHAR</td>
<td>User account name</td>
</tr>
<tr class="row-odd"><td>REMARKS</td>
<td>VARCHAR</td>
<td>Comment added to the user account</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Retrieve data source, schema, table and column.</li>
</ul>
<p>The following statements query the data source, schema, table and column information in order.</p>
<div class="highlight-bash"><div class="highlight"><pre>SHOW DATASOURCES <span class="p">;</span>

SHOW SCHEMAS <span class="o">[</span> DATASOURCE <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> <span class="o">]</span> <span class="o">[</span> SCHEMA &lt;schemaPattern&gt; <span class="o">]</span> <span class="p">;</span>

SHOW TABLES <span class="o">[</span> DATASOURCE <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> <span class="o">]</span> <span class="o">[</span> SCHEMA <span class="s1">&#39;&lt;schemaPattern&gt;&#39;</span> <span class="o">]</span>
              <span class="o">[</span> TABLE <span class="s1">&#39;&lt;tablePattern&gt;&#39;</span> <span class="o">]</span> <span class="p">;</span>

SHOW COLUMNS <span class="o">[</span> DATASOURCE <span class="s2">&quot;&lt;dataSourceName&gt;&quot;</span> <span class="o">]</span> <span class="o">[</span> SCHEMA <span class="s1">&#39;&lt;schemaPattern&gt;&#39;</span> <span class="o">]</span>
               <span class="o">[</span> TABLE <span class="s1">&#39;&lt;tablePattern&gt;&#39;</span> <span class="o">]</span> <span class="o">[</span> COLUMN <span class="s1">&#39;&lt;columnPattern&gt;&#39;</span> <span class="o">]</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>dataSourceName</strong></p>
<p>Data source name to retrieve information.</p>
<p><strong>schemaPattern, tablePattern, columnPattern</strong></p>
<p>Specify the particular schema, table, column pattern to retrieve information. The pattern is the same as SQL&#8217;s LIKE pattern and if you omit all of the targets will be retrieved.</p>
<blockquote>
<div><ul class="simple">
<li>example</li>
</ul>
</div></blockquote>
<div class="highlight-bash"><div class="highlight"><pre>SHOW TABLES DATASOURCE <span class="s2">&quot;spark&quot;</span> TABLE <span class="s1">&#39;%stat%&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>The results columns to the data source are as follows.</p>
<table border="1" class="docutils" id="making-h-table">
<colgroup>
<col width="20%" />
<col width="23%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TABLE_CAT</td>
<td>VARCHAR</td>
<td>data source name</td>
</tr>
<tr class="row-odd"><td>REMARKS</td>
<td>VARCHAR</td>
<td>comment added to a data source</td>
</tr>
</tbody>
</table>
<p>The results columns to the scheme are as follows.</p>
<table border="1" class="docutils" id="making-j-table">
<colgroup>
<col width="29%" />
<col width="18%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TABLE_SCHEM</td>
<td>VARCHAR</td>
<td>schema name</td>
</tr>
<tr class="row-odd"><td>TABLE_CATALOG</td>
<td>VARCHAR</td>
<td>data source name</td>
</tr>
<tr class="row-even"><td>REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the scheme</td>
</tr>
<tr class="row-odd"><td>TABLE_CAT_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the data source</td>
</tr>
</tbody>
</table>
<p>The results columns to the table are as follows.</p>
<table border="1" class="docutils" id="making-k-table">
<colgroup>
<col width="31%" />
<col width="15%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TABLE_CAT</td>
<td>VARCHAR</td>
<td>data source name</td>
</tr>
<tr class="row-odd"><td>TABLE_SCHEM</td>
<td>VARCHAR</td>
<td>scheme name</td>
</tr>
<tr class="row-even"><td>TABLE_NAME</td>
<td>VARCHAR</td>
<td>table name</td>
</tr>
<tr class="row-odd"><td>TABLE_TYPE</td>
<td>VARCHAR</td>
<td>table type (TABLE, VIEW)</td>
</tr>
<tr class="row-even"><td>REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the table</td>
</tr>
<tr class="row-odd"><td>TABLE_CAT_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the data source</td>
</tr>
<tr class="row-even"><td>TABLE_SCHEM_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the schema</td>
</tr>
</tbody>
</table>
<p>The results columns to the column are as follows.</p>
<table border="1" class="docutils" id="making-l-table">
<colgroup>
<col width="31%" />
<col width="20%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TABLE_CAT</td>
<td>VARCHAR</td>
<td>data source name</td>
</tr>
<tr class="row-odd"><td>TABLE_SCHEM</td>
<td>VARCHAR</td>
<td>scheme name</td>
</tr>
<tr class="row-even"><td>TABLE_NAME</td>
<td>VARCHAR</td>
<td>table name</td>
</tr>
<tr class="row-odd"><td>COLUMN_NAME</td>
<td>VARCHAR</td>
<td>column name</td>
</tr>
<tr class="row-even"><td>DATA_TYPE</td>
<td>VARCHAR</td>
<td>column&#8217;s SQL type (integer)</td>
</tr>
<tr class="row-odd"><td>TYPE_NAME</td>
<td>VARCHAR</td>
<td>type name</td>
</tr>
<tr class="row-even"><td>REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the column</td>
</tr>
<tr class="row-odd"><td>DATA_CATEGORY</td>
<td>VARCHAR</td>
<td>column category</td>
</tr>
<tr class="row-even"><td>TABLE_CAT_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the data source</td>
</tr>
<tr class="row-odd"><td>TABLE_SCHEM_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the scheme</td>
</tr>
<tr class="row-even"><td>TABLE_NAME_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the table</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Retrieve the privilege for the scheme that is granted to user account.</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>SHOW OBJECT PRIVILEGES FOR <span class="s1">&#39;&lt;user&gt;&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>user</strong></p>
<p>The target user account to retrieve the privilege.</p>
<blockquote>
<div><ul class="simple">
<li>example</li>
</ul>
</div></blockquote>
<div class="highlight-bash"><div class="highlight"><pre>SHOW OBJECT PRIVILEGES FOR <span class="s2">&quot;octopus&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>The results columns are as follows.</p>
<table border="1" class="docutils" id="making-m-table">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TABLE_CAT</td>
<td>VARCHAR</td>
<td>data source name</td>
</tr>
<tr class="row-odd"><td>TABLE_SCHEM</td>
<td>VARCHAR</td>
<td>scheme name</td>
</tr>
<tr class="row-even"><td>PRIVILEGE</td>
<td>VARCHAR</td>
<td>granted privilege for the scheme to user account (Separated by commas)</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Retrieve comments.</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>SHOW COMMENTS <span class="o">[</span> <span class="s1">&#39;&lt;commentPattern&gt;&#39;</span> <span class="o">}</span>
  <span class="o">[</span> DATASOURCE <span class="s1">&#39;&lt;dataSourcePattern&gt;&#39;</span> <span class="o">]</span> <span class="o">[</span> SCHEMA <span class="s1">&#39;&lt;schemaPattern&gt;&#39;</span> <span class="o">]</span>
  <span class="o">[</span> TABLE <span class="s1">&#39;&lt;tablePattern&gt;&#39;</span> <span class="o">]</span> <span class="o">[</span> COLUMN <span class="s1">&#39;&lt;columnPattern&gt;&#39;</span> <span class="o">]</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>commentPattern</strong></p>
<p>Specify the comment of the pattern to be queried.</p>
<p><strong>dataSourcePattern, schemaPattern, tablePattern, columnPattern</strong></p>
<dl class="docutils">
<dt>Specify the pattern of the particular data source, scheme, table and column. The pattern is the same as SQL&#8217;s LIKE pattern and if you omit all of the targets will be retrieved.</dt>
<dd><ul class="first last simple">
<li>example</li>
</ul>
</dd>
</dl>
<div class="highlight-bash"><div class="highlight"><pre>SHOW COMMENTS <span class="s1">&#39;%average%&#39;</span> DATASOURCE <span class="s1">&#39;spark&#39;</span> TABLE <span class="s1">&#39;%stat%&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>The results columns are as follows.</p>
<table border="1" class="docutils" id="making-n-table">
<colgroup>
<col width="23%" />
<col width="12%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>OBJECT_TYPE</td>
<td>VARCHAR</td>
<td>depending on the destination CATALOG, SCHEMA, TABLE, COLUMN</td>
</tr>
<tr class="row-odd"><td>TABLE_CAT</td>
<td>VARCHAR</td>
<td>data source name</td>
</tr>
<tr class="row-even"><td>TABLE_SCHEM</td>
<td>VARCHAR</td>
<td>scheme name</td>
</tr>
<tr class="row-odd"><td>TABLE_NAME</td>
<td>VARCHAR</td>
<td>table name</td>
</tr>
<tr class="row-even"><td>COLUMN_NAME</td>
<td>VARCHAR</td>
<td>column name</td>
</tr>
<tr class="row-odd"><td>TABLE_CAT_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the data source</td>
</tr>
<tr class="row-even"><td>TABLE_SCHEM_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the scheme</td>
</tr>
<tr class="row-odd"><td>TABLE_NAME_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the table</td>
</tr>
<tr class="row-even"><td>COLUMN_NAME_REMARKS</td>
<td>VARCHAR</td>
<td>comment added to the column</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="connector.html" class="btn btn-neutral float-right" title="Connector" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tool.html" class="btn btn-neutral" title="User tool" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, bitnine.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>